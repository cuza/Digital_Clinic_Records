define(["./core","./var/rnotwhite"],function(c,b){function a(e){var d={};c.each(e.match(b)||[],function(g,f){d[f]=true});return d}c.Callbacks=function(m){m=typeof m==="string"?a(m):c.extend({},m);var h,f,d,g,k=[],i=[],j=-1,e=function(){g=m.once;d=h=true;for(;i.length;j=-1){f=i.shift();while(++j<k.length){if(k[j].apply(f[0],f[1])===false&&m.stopOnFalse){j=k.length;f=false}}}if(!m.memory){f=false}h=false;if(g){if(f){k=[]}else{k=""}}},l={add:function(){if(k){if(f&&!h){j=k.length-1;i.push(f)}(function n(o){c.each(o,function(q,p){if(c.isFunction(p)){if(!m.unique||!l.has(p)){k.push(p)}}else{if(p&&p.length&&c.type(p)!=="string"){n(p)}}})})(arguments);if(f&&!h){e()}}return this},remove:function(){c.each(arguments,function(p,n){var o;while((o=c.inArray(n,k,o))>-1){k.splice(o,1);if(o<=j){j--}}});return this},has:function(n){return n?c.inArray(n,k)>-1:k.length>0},empty:function(){if(k){k=[]}return this},disable:function(){g=i=[];k=f="";return this},disabled:function(){return !k},lock:function(){g=i=[];if(!f){k=f=""}return this},locked:function(){return !!g},fireWith:function(o,n){if(!g){n=n||[];n=[o,n.slice?n.slice():n];i.push(n);if(!h){e()}}return this},fire:function(){l.fireWith(this,arguments);return this},fired:function(){return !!d}};return l};return c});