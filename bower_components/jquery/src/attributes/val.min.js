define(["../core","./support","../core/init"],function(d,b){var c=/\r/g,a=/[\x20\t\r\n\f]+/g;d.fn.extend({val:function(h){var e,f,i,g=this[0];if(!arguments.length){if(g){e=d.valHooks[g.type]||d.valHooks[g.nodeName.toLowerCase()];if(e&&"get" in e&&(f=e.get(g,"value"))!==undefined){return f}f=g.value;return typeof f==="string"?f.replace(c,""):f==null?"":f}return}i=d.isFunction(h);return this.each(function(j){var k;if(this.nodeType!==1){return}if(i){k=h.call(this,j,d(this).val())}else{k=h}if(k==null){k=""}else{if(typeof k==="number"){k+=""}else{if(d.isArray(k)){k=d.map(k,function(l){return l==null?"":l+""})}}}e=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()];if(!e||!("set" in e)||e.set(this,k,"value")===undefined){this.value=k}})}});d.extend({valHooks:{option:{get:function(e){var f=d.find.attr(e,"value");return f!=null?f:d.trim(d.text(e)).replace(a," ")}},select:{get:function(e){var l,g,n=e.options,j=e.selectedIndex,h=e.type==="select-one"||j<0,m=h?null:[],k=h?j+1:n.length,f=j<0?k:h?j:0;for(;f<k;f++){g=n[f];if((g.selected||f===j)&&(b.optDisabled?!g.disabled:g.getAttribute("disabled")===null)&&(!g.parentNode.disabled||!d.nodeName(g.parentNode,"optgroup"))){l=d(g).val();if(h){return l}m.push(l)}}return m},set:function(j,k){var l,h,f=j.options,e=d.makeArray(k),g=f.length;while(g--){h=f[g];if(h.selected=d.inArray(d.valHooks.option.get(h),e)>-1){l=true}}if(!l){j.selectedIndex=-1}return e}}}});d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(e,f){if(d.isArray(f)){return(e.checked=d.inArray(d(e).val(),f)>-1)}}};if(!b.checkOn){d.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}})});