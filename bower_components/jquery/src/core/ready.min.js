define(["../core","../var/document","../core/init","../deferred"],function(c,a){var d;c.fn.ready=function(e){c.ready.promise().done(e);return this};c.extend({isReady:false,readyWait:1,holdReady:function(e){if(e){c.readyWait++}else{c.ready(true)}},ready:function(e){if(e===true?--c.readyWait:c.isReady){return}c.isReady=true;if(e!==true&&--c.readyWait>0){return}d.resolveWith(a,[c]);if(c.fn.triggerHandler){c(a).triggerHandler("ready");c(a).off("ready")}}});function b(){a.removeEventListener("DOMContentLoaded",b);window.removeEventListener("load",b);c.ready()}c.ready.promise=function(e){if(!d){d=c.Deferred();if(a.readyState==="complete"||(a.readyState!=="loading"&&!a.documentElement.doScroll)){window.setTimeout(c.ready)}else{a.addEventListener("DOMContentLoaded",b);window.addEventListener("load",b)}}return d.promise(e)};c.ready.promise()});